generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  DEV
  ADMIN
  SELLER
  USER
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  fone      String
  password  String
  role      Role     @default(USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model AuthLog {
  id        Int      @id @default(autoincrement())
  email     String   // O email que foi tentado (sucesso ou falha)
  success   Boolean  // Se a tentativa foi bem-sucedida ou não
  message   String   // Descrição da falha (ex: 'Email não encontrado', 'Senha inválida')
  ipAddress String?  // Opcional: IP do cliente que fez a requisição
  userAgent String?  // Opcional: User-Agent do cliente (navegador, etc.)
  createdAt DateTime @default(now())
}

model Category {
  id       Int      @id @default(autoincrement())
  name     String   @unique @db.VarChar(100)
  slug     String   @unique @db.VarChar(100)
  
  products Product[]
}

model Product {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  name        String   @db.VarChar(150)
  sku         String?  @unique @db.VarChar(50)
  slug        String?  @unique @db.VarChar(150)

  description String?  @db.Text
  
  price       Decimal  @db.Decimal(10, 2)
  stock       Int      @default(0)

  size        String?  @db.VarChar(50)
  color       String?  @db.VarChar(50)

  isAvailable Boolean  @default(true)
  isFeatured  Boolean  @default(false)

  mainImage   String?

  categoryId  Int?
  category    Category? @relation(fields: [categoryId], references: [id])
}